<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>サーヴァント全員言えるかな</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 0;
      background: #f5f5f5;
    }

    /* 固定ヘッダー */
    #fixedHeader {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: white;
      border-bottom: 1px solid #ccc;
      padding: 10px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: 10px;
      z-index: 1000;
    }

    #result {
      font-size: 20px;
      min-width: 1.5em;
      text-align: center;
    }

    #counter {
      font-size: 14px;
    }

    #resetBtn {
      padding: 6px 10px;
      font-size: 14px;
      background: #eee;
      border: 1px solid #ccc;
      cursor: pointer;
    }

    /* 盤面 */
    #board {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 100px 10px 20px; /* ヘッダー分の余白を確保 */
    }

    .cell {
      width: 90px;
      height: 40px;
      background: white;
      border: 1px solid #ccc;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      transition: background-color 0.3s;
    }

    .cell.found {
      background-color: #ffe5e5; /* ほんのり赤く */
    }

    input[type=text] {
      padding: 6px;
      font-size: 14px;
    }

    button {
      padding: 6px 10px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <!-- 固定ヘッダー -->
  <div id="fixedHeader">
    <p>サーヴァント全員言えるかな　図鑑番号順（</p>
    <input id="answerInput" type="text" placeholder="答えを入力" />
    <button id="checkBtn">回答</button>
    <div id="result"></div>
    <div id="counter"></div>
    <button id="resetBtn">リセット</button>
  </div>

  <!-- 盤面 -->
  <div id="board"></div>

  <script>
    // お題の答えリスト（重複ありOK）
    const answers =["マシュ・キリエライト","アルトリア・ペンドラゴン","アルトリア・ペンドラゴン（オルタ）","アルトリア・ペンドラゴン（リリィ）","ネロ・クラウディウス","ジークフリート","ガイウス・ユリウス・カエサル","アルテラ","ジル・ド・レェ","シュヴァリエ・デオン","エミヤ","ギルガメッシュ","ロビンフッド","アタランテ","エウリュアレ","アーラシュ","クー・フーリン","エリザベート・バートリー","武蔵坊弁慶","クー・フーリン（プロトタイプ）","レオニダス一世","ロムルス","メドゥーサ","ゲオルギウス","エドワード・ティーチ","ブーディカ","牛若丸","アレキサンダー","マリー・アントワネット","マルタ","メディア","ジル・ド・レェ","ハンス・クリスチャン・アンデルセン","ウィリアム・シェイクスピア","メフィストフェレス","ヴォルフガング・アマデウス・モーツァルト","諸葛孔明","クー・フーリン","佐々木小次郎","呪腕のハサン","ステンノ","荊軻","シャルル＝アンリ・サンソン","ファントム・オブ・ジ・オペラ","マタ・ハリ","カーミラ","ヘラクレス","ランスロット","呂布奉先","スパルタクス","坂田金時","ヴラド三世","アステリオス","カリギュラ","ダレイオス三世","清姫","エイリーク・ブラッドアクス","タマモキャット","ジャンヌ・ダルク","オリオン","エリザベート・バートリー（ハロウィン）","玉藻の前","ダビデ","ヘクトール","フランシス・ドレイク","アン・ボニー＆メアリー・リード","メディア（リリィ）","沖田総司","織田信長","スカサハ","ディルムッド・オディナ","フェルグス・マック・ロイ","アルトリア・ペンドラゴン（サンタオルタ）","ナーサリー・ライム","ジャック・ザ・リッパー","モードレッド","ニコラ・テスラ","アルトリア・ペンドラゴン（オルタ）","ヴァン・ホーエンハイム・パラケルスス","チャールズ・バベッジ","ヘンリー・ジキル＆ハイド","フランケンシュタイン","ソロモン","アルジュナ","カルナ","謎のヒロインX","フィン・マックール","ブリュンヒルデ","ベオウルフ","ネロ・クラウディウス（ブライド）","両儀式","両儀式","天草四郎","アストルフォ","子ギル","巌窟王","ナイチンゲール","クー・フーリン（オルタ）","女王メイヴ","エレナ・ブラヴァツキー","ラーマ","李書文","トーマス・エジソン","ジェロニモ","ビリー・ザ・キッド","ジャンヌ・ダルク（オルタ）","アンリマユ","イスカンダル","エミヤ（アサシン）","百貌のハサン","アイリスフィール","酒呑童子","玄奘三蔵","源頼光","坂田金時","茨木童子","風魔小太郎","オジマンディアス","アルトリア・ペンドラゴン","ニトクリス","ランスロット","トリスタン","ガウェイン","静謐のハサン","俵藤太","ベディヴィエール","レオナルド・ダ・ヴィンチ","玉藻の前","アルトリア・ペンドラゴン","マリー・アントワネット","アン・ボニー＆メアリー・リード","モードレッド","スカサハ","清姫","マルタ","イリヤスフィール・フォン・アインツベルン","クロエ・フォン・アインツベルン","エリザベート・バートリー（ブレイブ）","クレオパトラ","ヴラド三世（EXTRA）","ジャンヌ・ダルク・オルタ・サンタ・リリィ","イシュタル","エルキドゥ","ケツァル・コアトル","ギルガメッシュ","メドゥーサ","ゴルゴーン","ジャガーマン","ティアマト","マーリン","ゲーティア","ソロモン","宮本武蔵","“山の翁”","謎のヒロインX（オルタ）","新宿のアーチャー","エミヤ（オルタ）","新宿のアヴェンジャー","新宿のアサシン","アーサー・ペンドラゴン（プロトタイプ）","土方歳三","茶々","メルトリリス","パッションリップ","鈴鹿御前","ＢＢ","殺生院キアラ","ビーストⅢ／Ｒ","不夜城のキャスター","不夜城のアサシン","エルドラドのバーサーカー","レジスタンスのライダー","シャーロック・ホームズ","ポール・バニヤン","ネロ・クラウディウス","フランケンシュタイン","ニトクリス","織田信長","アルトリア・ペンドラゴン（オルタ）","エレナ・ブラヴァツキー","源頼光","イシュタル","パールヴァティー","アーチャー・インフェルノ","アサシン・パライソ","宝蔵院胤舜","柳生但馬守宗矩","加藤段蔵","刑部姫","メカエリチャン","メカエリチャンⅡ号機","オケアノスのキャスター","哪吒","ミドラーシュのキャスター","アビゲイル・ウィリアムズ","エレシュキガル","アルテラ・ザ・サン（タ）","葛飾北斎","セミラミス","浅上藤乃","アナスタシア","アタランテ（オルタ）","アヴィケブロン","アントニオ・サリエリ","イヴァン雷帝","アキレウス","ケイローン","ジーク","沖田総司（オルタ）","岡田以蔵","坂本龍馬","ナポレオン","シグルド","ワルキューレ","スカサハ＝スカディ","ジャンヌ・ダルク","茨木童子","牛若丸","ジャンヌ・ダルク（オルタ）","ＢＢ","女王メイヴ","謎のヒロインXX","ディルムッド・オディナ","シトナイ","酒呑童子","項羽","蘭陵王","秦良玉","始皇帝","虞美人","赤兎馬","ブラダマンテ","ケツァル・コアトル（サンバ／サンタ）","紅閻魔","李書文","美遊・エーデルフェルト","紫式部","キングプロテア","カーマ","ビーストⅢ／Ｌ","司馬懿","アストライア","グレイ","ジナコ＝カリギリ","ラクシュミー・バーイー","ウィリアム・テル","アルジュナ（オルタ）","アシュヴァッターマン","アスクレピオス","魔王信長","森長可","長尾景虎","レオナルド・ダ・ヴィンチ","イアソン","パリス","ガレス","バーソロミュー・ロバーツ","陳宮","シャルロット・コルデー","サロメ","宮本武蔵","刑部姫","カーミラ","葛飾北斎","アルトリア・ペンドラゴン","謎のアルターエゴ・Λ","沖田総司","スペース・イシュタル","カラミティ・ジェーン","アストルフォ","ナイチンゲール（サンタ）","超人オリオン","マンドリカルド","エウロペ","楊貴妃","清少納言","オデュッセウス","ディオスクロイ","カイニス","ロムルス＝クィリヌス","ボイジャー","鬼女紅葉","宇津見エリセ","アルトリア・キャスター","殺生院キアラ","イリヤスフィール・フォン・アインツベルン","ブリュンヒルデ","虞美人","アビゲイル・ウィリアムズ（夏）","巴御前","紫式部","卑弥呼","斎藤一","織田信勝","ヴァン・ゴッホ","ネモ","蘆屋道満","渡辺綱","伊吹童子","ヴリトラ","カルナ（サンタ）","千子村正","平景清","鬼一法眼","アムール","ガラテア","ミス・クレーン","謎のアイドルX（オルタ）","モルガン","妖精騎士ガウェイン","妖精騎士トリスタン","妖精騎士ランスロット","パーシヴァル","光のコヤンスカヤ","ハベトロット","オベロン","沖田総司（オルタ）","アナスタシア＆ヴィイ","シャルロット・コルデー","レオナルド・ダ・ヴィンチ","カーマ","カイニス","清少納言","ジャック・ド・モレー","ゼノビア","エリザベート・バートリー（シンデレラ）","出雲阿国","謎の蘭丸X","坂本龍馬","マルタ（サンタ）","太公望","ドブルイニャ・ニキチッチ","ビーストⅣ","闇のコヤンスカヤ","ヘファイスティオン","マナナン・マク・リール","徴姉妹","太歳星君","スーパーバニヤン","大黒天","メアリー・アニング","コンスタンティノス11世","シャルルマーニュ","ローラン","クリームヒルト","ジェームズ・モリアーティ","ドン・キホーテ","張角","曲亭馬琴","源為朝","アーキタイプ：アース","徐福","レディ・アヴァロン","ガレス","伊吹童子","宇津見エリセ","スカサハ＝スカディ","武則天","スルーズ","ヒルド","オルトリンデ","千利休","山南敬助","壱与","呼延灼","黄飛虎","九紋竜エリザ","ブリトマート","グレゴリー・ラスプーチン","ニトクリス（オルタ）","テスカトリポカ","トラロック","ククルカン","女教皇ヨハンナ","高杉晋作","ラーヴァ／ティアマト","ソドムズビースト／ドラコー","ロクスタ","セタンタ","果心居士","ビーマ","ドゥリーヨダナ","ドゥルガー","メドゥーサ","雨の魔女トネリコ","アルトリア・キャスター","鈴鹿御前（サマバケ）","クロエ・フォン・アインツベルン","ノクナレア・ヤラアーンドゥ","メリュジーヌ","ＵＤＫ－バーゲスト","ケット・クー・ミコケル","ワンジナ","プトレマイオス","杉谷善住坊","テセウス","武田晴信","永倉新八","雑賀孫一","上杉謙信","ネモ（サンタ）","ヤマトタケル","源頼光／丑御前","由井正雪","宮本伊織","アンドロメダ","マリー・アントワネット（オルタ）","耀星のハサン","巌窟王 モンテ・クリスト","アレッサンドロ・ディ・カリオストロ","Ｅ－フレアマリー","Ｅ－アクアマリー","蒼崎青子","静希草十郎","久遠寺有珠","ひびき＆千鍵","スペース・エレシュキガル","謎の代行者C.I.E.L","ドブルイニャ・ニキチッチ","徐福","BBドバイ","テノチティトラン","謎のヒロインXX（オルタ）","岸波白野","岸波白野","カズラドロップ","ツタンカーメン","ヴァン・ゴッホ（マイナー）","ロウヒ","アビゲイル・ウィリアムズ（サンタ）","ファンタズムーン","リチャードⅠ世","ビショーネ","黒姫","小野小町","Ｅ－グランマリー","ダンテ・アリギエーリ","メタトロン・ジャンヌ","アショカ王","リリス","テュフォン・エフェメロス","インドラ","Ｅ－ステラマリー","Ｕ－オルガマリー","パッションリップ","クリームヒルト","呼延灼","玉兎","美遊・エーデルフェルト","ラーヴァ／ティアマト","ジュネス・クレーン","ネモ／ノア","河上彦斎","藤堂平助","原田左之助","近藤勇"
];

    const STORAGE_KEY = 'quizGameProgress';

    // 正規化関数
    const norm = s => (s || "").toString().normalize('NFKC').trim().toLowerCase();

    // 保存データの読み込み
    let foundIndexes = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

    // 盤面生成
    const board = document.getElementById('board');
    const cells = [];
    answers.forEach((a, i) => {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.textContent = i + 1;
      if (foundIndexes.includes(i)) {
        cell.classList.add('found');
        cell.textContent = a;
      }
      board.appendChild(cell);
      cells.push(cell);
    });

    // UI取得
    const input = document.getElementById('answerInput');
    const checkBtn = document.getElementById('checkBtn');
    const result = document.getElementById('result');
    const counter = document.getElementById('counter');
    const resetBtn = document.getElementById('resetBtn');

    // カウンター更新
    function updateCounter() {
      const foundCount = foundIndexes.length;
      const remaining = answers.length - foundCount;
      counter.textContent = `正解数: ${foundCount} / 残り: ${remaining}`;
    }

    // 保存
    function saveProgress() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(foundIndexes));
    }

    // 回答処理
    function checkAnswer() {
      const val = norm(input.value);
      if (!val) return;

      let found = false;
      answers.forEach((a, i) => {
        if (norm(a) === val && !foundIndexes.includes(i)) {
          cells[i].textContent = a;
          cells[i].classList.add('found');
          foundIndexes.push(i);
          found = true;
        }
      });

      result.textContent = found ? '〇' : '×';
      result.style.color = found ? 'red' : 'blue';

      saveProgress();
      updateCounter();

      input.value = '';
      input.focus();
    }

    checkBtn.addEventListener('click', checkAnswer);
    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') checkAnswer();
    });

    // リセット処理
    resetBtn.addEventListener('click', () => {
      if (!confirm('本当にリセットしますか？')) return;
      foundIndexes = [];
      localStorage.removeItem(STORAGE_KEY);
      cells.forEach((cell, i) => {
        cell.classList.remove('found');
        cell.textContent = i + 1;
      });
      result.textContent = '';
      updateCounter();
    });

    // 初期カウンター
    updateCounter();
  </script>
</body>
</html>

